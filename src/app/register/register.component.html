<app-navbar></app-navbar>

<div class="container w-75 mt-5 rounded shadow">
  <div class="row alingn-items-stretch">
    <div class="col bg d-none d-lg-block col-md-5 col-lg-5 col-xl-6 rounded">
    </div>
    <div id="cardDark" class="col p-5 rounded-end">
      <div class="text-end">
        <img src="../../assets/img/logo-crud2.png" width="45px" alt="Base de datos futuristica de la informacion del mundo">
      </div>
      <h2 class="fw-bold text-center py-5">Registro de Usuario</h2>
      <form class="custom-form" (ngSubmit)="register()" >
        <div class="mb-4">
          <label for="name" class="form-label">Nombre</label>
          <input type="text" class="form-control" name="name" placeholder="Ingresa tu nombre" required [(ngModel)]="name">
          <div *ngIf="!name">
            <small class="text-danger">Debes llenar este campo.</small>
          </div>
        </div>
        <div class="mb-4">
          <label for="gender" class="form-label">Género</label>
          <select [(ngModel)]="gender_id" [ngModelOptions]="{standalone: true}" class="form-control" id="inputGender" [disabled]="!name">
            <option value="0" disabled selected>Selecciona un Género</option>
            <option [value]="gender.id" *ngFor="let gender of genderData">{{ gender.name }}</option>
          </select>
        </div>
        <div class="mb-4">
          <label for="profession" class="form-label">Profesión</label>
          <select [(ngModel)]="profession_id" [ngModelOptions]="{standalone: true}" class="form-control" id="inputProfession" [disabled]="!gender_id">
            <option value="0" disabled selected>Selecciona una Profesión</option>
            <option [value]="profession.id" *ngFor="let profession of professionData">{{ profession.name }}</option>
          </select>
        </div>
        <div class="mb-4">
          <label for="country" class="form-label">País</label>
          <select [(ngModel)]="country_id" (ngModelChange)="selectCountry()" [ngModelOptions]="{standalone: true}" id="inputCountry" class="form-control" [disabled]="!profession_id">
            <option value="0" selected disabled>Elige un País</option>
            <option [value]="country.id" *ngFor="let country of countryData">{{country.name}}</option>
          </select>
        </div>
        <div class="mb-4">
          <label for="department" class="form-label">Departamento</label>
          <select [(ngModel)]="departaments_id" (ngModelChange)="selectDepartament()" [ngModelOptions]="{standalone: true}" id="inputDepartament" class="form-control" [disabled]="!country_id">
            <option value="0" disabled>Elige un Departamento</option>
            <option [value]="departament.id" *ngFor="let departament of departamentData">{{departament.name}}</option>
          </select>
        </div>
        <div class="mb-4">
          <label for="municipality" class="form-label">Municipio</label>
          <select [(ngModel)]="municipality_id" [ngModelOptions]="{standalone: true}" id="inputMunicipality" class="form-control" [disabled]="!departaments_id">
            <option value="0" disabled>Elige un Municipio</option>
            <option [value]="municipality.id" *ngFor="let municipality of municipalityData">{{municipality.name}}</option>
          </select>
        </div>
        <div class="mb-4">
          <label for="email" class="form-label">Email</label>
          <input type="email" class="form-control" name="email" [disabled]="!municipality_id" placeholder="Ingresa tu correo" required [(ngModel)]="email">
          <div *ngIf="!emailValid" class="mb-4">
            <small class="text-danger">Escriba un correo válido.</small>
          </div>
        </div>
        <div class="mb-4">
          <label for="password" class="form-label">Contraseña</label>
          <input type="password" class="form-control" name="password" [disabled]="!email" placeholder="Ingresa tu contraseña" required [(ngModel)]="password">
          <div *ngIf="!passwordLengthValid" class="mb-4">
            <small class="text-danger">La contraseña debe tener al menos 8 caracteres.</small>
          </div>
        </div>
        <div class="mb-4">
          <label for="password_confirmation" class="form-label">Confirmar Contraseña</label>
          <input type="password" class="form-control" name="password_confirmation" [disabled]="!password" placeholder="Confirma tu contraseña" required [(ngModel)]="password_confirmation">
          <div *ngIf="!passwordsMatch" class="mb-4">
            <small class="text-danger">Las contraseñas no coinciden, inténtalo de nuevo</small>
          </div>
        </div>
        <div class="d-grid">
          <button type="submit" class="btn btn-outline-primary">Registrarse</button>
        </div>
      </form>
    </div>
  </div>
</div>
